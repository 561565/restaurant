{"remainingRequest":"D:\\Vue项目\\restaurant_p\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue项目\\restaurant_p\\src\\components\\menu.vue?vue&type=style&index=0&id=a380d422&scoped=true&lang=css&","dependencies":[{"path":"D:\\Vue项目\\restaurant_p\\src\\components\\menu.vue","mtime":1583077346137},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5lbC1jb2xsYXBzZS1pdGVtIHsNCiAgYm94LXNoYWRvdzogMHB4IDBweCAxcHggMnB4IHJnYigyMjEsIDIyMSwgMjIxKTsNCn0NCg=="},{"version":3,"sources":["menu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4qBA;AACA;AACA","file":"menu.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div style=\"font-family:Franklin Gothic Medium;padding:25px 50px;\">\r\n    <div\r\n      style=\"box-shadow:0 0 2px 1px #ccc;display: flex;justify-content:space-between;padding:30px 20px;border-radius: 10px;background-color:#fff;margin-bottom:25px;\"\r\n    >\r\n      <div style=\"display: flex;align-items: center;\">\r\n        <div style=\"color:red;margin-right:5px;\">*</div>\r\n        <div style=\"margin-right:10px;\">菜单名称</div>\r\n        <div style=\"box-shadow:0px 0px 1px 0px #ccc;margin-right:20px;\">\r\n          <el-input placeholder=\"输入菜名\" v-model=\"searchGoods\" clearable></el-input>\r\n        </div>\r\n        <div>\r\n          <el-button type=\"success\">搜索</el-button>\r\n        </div>\r\n      </div>\r\n\r\n      <div style=\"display: flex;\">\r\n        <div style=\"margin-right:10px;\">\r\n          <el-button type=\"info\" plain>使用</el-button>\r\n        </div>\r\n        <div style=\"margin-right:10px;\">\r\n          <el-button\r\n            style=\"background-color: rgb(43, 144, 233);border: rgb(43, 144, 233);\"\r\n            @click=\"dialogAddMenu = true\"\r\n            type=\"primary\"\r\n          >添加类别</el-button>\r\n        </div>\r\n        <div style=\"margin-right:10px;\">\r\n          <el-button type=\"warning\">排序</el-button>\r\n        </div>\r\n        <div style=\"margin-right:10px;\">\r\n          <el-button type=\"danger\">删除菜单</el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <el-collapse v-model=\"goodsType\">\r\n        <div v-for=\"(i,id) in goodsTypeList\" :key=\"id\">\r\n          <el-collapse-item :name=\"id+1\">\r\n            <template slot=\"title\">\r\n              <div\r\n                style=\"color:#666;align-items:center;display:flex;flex:1;justify-content: space-between;\"\r\n              >\r\n                <div style=\"display:flex;\">\r\n                  <div style=\"margin-left:35px;margin-right:10px;\">\r\n                    <i class=\"el-icon-more\" style=\"font-size:20px;\"></i>\r\n                  </div>\r\n                  <div style=\"font-size:17px;\">{{i.name}}</div>\r\n                </div>\r\n\r\n                <div style=\"display:flex;\">\r\n                  <div @click.stop=\"dialogEditMenu=true,editMenuForm.id=id\">\r\n                    <i class=\"el-icon-edit\" style=\"color: rgb(37, 130, 250);font-size:20px;\"></i>\r\n                  </div>\r\n                  <div @click.stop=\"deleteMenu(id)\" style=\"margin:0 40px 0 15px;\">\r\n                    <i\r\n                      class=\"el-icon-delete-solid\"\r\n                      style=\"color: rgb(37, 130, 250);font-size:20px;\"\r\n                    ></i>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </template>\r\n            <div style=\"padding:20px 20px;\">\r\n              <el-row :gutter=\"40\">\r\n                <div\r\n                  v-for=\"(g,goodsId) in i.goodsList\"\r\n                  :key=\"goodsId\"\r\n                  class=\"grid-content bg-purple\"\r\n                >\r\n                  <el-col :span=\"8\">\r\n                    <div style=\"padding-bottom:20px;\">\r\n                      <div\r\n                        style=\"box-shadow:1px 1px 5px 0px #ccc;display: flex;background-color:#fff;border-radius: 10px;border: 1px solid rgb(221, 221, 221);padding:20px 12px 20px 40px;\"\r\n                      >\r\n                        <div>\r\n                          <img\r\n                            style=\"box-shadow:1px 1px 5px 0px #ccc;border: 1px dashed rgb(163, 163, 163);border-radius: 10px;width: 120px;height: 120px;margin-right: 30px;\"\r\n                            :src=\"g.img\"\r\n                            alt\r\n                          />\r\n                        </div>\r\n                        <div style=\"flex:1;\">\r\n                          <div\r\n                            style=\"display: flex;justify-content:space-between;margin-bottom:18px;\"\r\n                          >\r\n                            <div\r\n                              style=\"font-size: 16px;font-weight: 700;margin-top: 5px;\"\r\n                            >{{g.name}}</div>\r\n                            <div style=\"margin-right:30px;\">\r\n                              <div\r\n                                @click=\"dialogEditGoods=true,editGoodsForm.id=id,editGoodsForm.gId=goodsId\"\r\n                                style=\"margin-bottom:10px;\"\r\n                              >\r\n                                <i\r\n                                  class=\"el-icon-edit\"\r\n                                  style=\"color: rgb(37, 130, 250);font-size:20px;\"\r\n                                ></i>\r\n                              </div>\r\n                              <div @click=\"deleteGoods(id,goodsId)\">\r\n                                <i\r\n                                  class=\"el-icon-delete-solid\"\r\n                                  style=\"color: rgb(37, 130, 250);font-size:20px;\"\r\n                                ></i>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          <div style=\"color: rgb(49, 255, 100);margin-bottom:5px;\">已上架</div>\r\n\r\n                          <div style=\"display: flex;justify-content:space-between;\">\r\n                            <div>\r\n                              <div style=\"color: rgb(87, 87, 87);\">库存：{{g.stock}}</div>\r\n                              <div style=\"color: rgb(87, 87, 87);\">价格：{{g.price}}</div>\r\n                            </div>\r\n                            <div style=\"color: rgb(87, 87, 87);display: flex;margin:20px 20px 0 0\">\r\n                              <div style=\"margin-right:5px;\">{{g.like}}</div>\r\n\r\n                              <img\r\n                                style=\"width: 18px;height: 18px;font-size: 15px;\"\r\n                                src=\"image/like.png\"\r\n                                alt\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </el-col>\r\n                </div>\r\n\r\n                <el-col :span=\"8\">\r\n                  <div\r\n                    @click=\"dialogAddGoods = true,addGoodsForm.id=id\"\r\n                    style=\"background-color:#eee;display:flex;flex:1;border-radius: 10px;border: 4px dashed rgb(221, 221, 221);height:182px;\"\r\n                  >\r\n                    <div style=\"font-size: 25px;color: rgb(144, 144, 144);margin: auto;\">\r\n                      <i class=\"el-icon-plus\"></i>添加新菜品\r\n                    </div>\r\n                  </div>\r\n                </el-col>\r\n              </el-row>\r\n            </div>\r\n          </el-collapse-item>\r\n        </div>\r\n      </el-collapse>\r\n      <!-- <div v-if=\"!goodsTypeList.Array\">\r\n        1234444444444444444444444444444444\r\n      </div>-->\r\n    </div>\r\n    <el-dialog\r\n      title=\"添加类别\"\r\n      style=\"font-weight:700;\"\r\n      width=\"500px\"\r\n      :before-close=\"cancel\"\r\n      :visible.sync=\"dialogAddMenu\"\r\n    >\r\n      <el-form :model=\"addMenuForm\">\r\n        <el-input\r\n          v-model=\"addMenuForm.name\"\r\n          placeholder=\"输入类别名称...\"\r\n          show-word-limit\r\n          maxlength=\"6\"\r\n          autocomplete=\"off\"\r\n        ></el-input>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"cancel()\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addMenu()\">添 加</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog\r\n      title=\"编辑类别\"\r\n      style=\"font-weight:700;\"\r\n      width=\"500px\"\r\n      :before-close=\"cancel\"\r\n      :visible.sync=\"dialogEditMenu\"\r\n    >\r\n      <el-form :model=\"editMenuForm\">\r\n        <el-input\r\n          v-model=\"editMenuForm.name\"\r\n          placeholder=\"输入新的类别名称...\"\r\n          show-word-limit\r\n          maxlength=\"6\"\r\n          autocomplete=\"off\"\r\n        ></el-input>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"cancel()\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editMenu()\">修 改</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog\r\n      title=\"添加菜品\"\r\n      style=\"font-weight:700;\"\r\n      width=\"600px\"\r\n      :before-close=\"cancel\"\r\n      :visible.sync=\"dialogAddGoods\"\r\n    >\r\n      <el-form :model=\"addGoodsForm\">\r\n        <div style=\"text-align:center;padding:0 20px;\">\r\n          <el-upload\r\n            action=\"https://jsonplaceholder.typicode.com/posts/\"\r\n            list-type=\"picture-card\"\r\n            :on-preview=\"handlePictureCardPreview\"\r\n          >\r\n            <i class=\"el-icon-plus\"></i>\r\n          </el-upload>\r\n\r\n          <div style=\"display: flex;margin-top:40px;\">\r\n            <div style=\"font-size:16px;padding:10px 20px;\">名称</div>\r\n            <div style=\"flex:1\">\r\n              <el-input\r\n                v-model=\"addGoodsForm.name\"\r\n                show-word-limit\r\n                maxlength=\"6\"\r\n                placeholder=\"输入...\"\r\n                :clearable=\"true\"\r\n              ></el-input>\r\n            </div>\r\n            <div style=\"font-size:16px;padding:10px 20px;margin-left:20px;\">是否上架</div>\r\n            <div>\r\n              <el-switch\r\n                style=\"padding:10px 0px;margin-right:25px;\"\r\n                v-model=\"addGoodsForm.isSell\"\r\n                active-color=\"#13ce66\"\r\n                inactive-color=\"#ff4949\"\r\n              ></el-switch>\r\n            </div>\r\n          </div>\r\n          <div style=\"display: flex;margin-top:40px;\">\r\n            <div style=\"font-size:16px;padding:10px 20px;\">价格</div>\r\n            <div style=\"flex:1\">\r\n              <el-input v-model=\"addGoodsForm.price\"></el-input>\r\n            </div>\r\n            <div style=\"margin-left:20px;font-size:16px;padding:10px 20px;\">库存</div>\r\n            <div style=\"flex:1;margin-right:20px;\">\r\n              <el-input v-model=\"addGoodsForm.stock\"></el-input>\r\n            </div>\r\n          </div>\r\n          <div style=\"display: flex;margin-top:40px;\">\r\n            <div style=\"font-size:16px;padding:10px 20px;\">描述</div>\r\n            <div style=\"flex:1;margin-right:20px;\">\r\n              <el-input v-model=\"addGoodsForm.introduce\" placeholder=\"输入...\" :clearable=\"true\"></el-input>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </el-form>\r\n      <div slot=\"footer\" style=\"text-align:center\" class=\"dialog-footer\">\r\n        <el-button style=\"width:88%\" type=\"success\" @click=\"addGoods()\">添加</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog\r\n      title=\"编辑菜品\"\r\n      style=\"font-weight:700;\"\r\n      width=\"600px\"\r\n      :before-close=\"cancel\"\r\n      :visible.sync=\"dialogEditGoods\"\r\n    >\r\n      <el-form :model=\"addGoodsForm\">\r\n        <div style=\"text-align:center;padding:0 20px;\">\r\n          <el-upload\r\n            action=\"https://jsonplaceholder.typicode.com/posts/\"\r\n            list-type=\"picture-card\"\r\n            :on-preview=\"handlePictureCardPreview\"\r\n          >\r\n            <i class=\"el-icon-plus\"></i>\r\n          </el-upload>\r\n\r\n          <div style=\"display: flex;margin-top:40px;\">\r\n            <div style=\"font-size:16px;padding:10px 20px;\">名称</div>\r\n            <div style=\"flex:1\">\r\n              <el-input\r\n                v-model=\"editGoodsForm.name\"\r\n                show-word-limit\r\n                maxlength=\"6\"\r\n                placeholder=\"输入...\"\r\n                :clearable=\"true\"\r\n              ></el-input>\r\n            </div>\r\n            <div style=\"font-size:16px;padding:10px 20px;margin-left:20px;\">是否上架</div>\r\n            <div>\r\n              <el-switch\r\n                style=\"padding:10px 0px;margin-right:25px;\"\r\n                v-model=\"editGoodsForm.isSell\"\r\n                active-color=\"#13ce66\"\r\n                inactive-color=\"#ff4949\"\r\n              ></el-switch>\r\n            </div>\r\n          </div>\r\n          <div style=\"display: flex;margin-top:40px;\">\r\n            <div style=\"font-size:16px;padding:10px 20px;\">价格</div>\r\n            <div style=\"flex:1\">\r\n              <el-input v-model=\"editGoodsForm.price\"></el-input>\r\n            </div>\r\n            <div style=\"margin-left:20px;font-size:16px;padding:10px 20px;\">库存</div>\r\n            <div style=\"flex:1;margin-right:20px;\">\r\n              <el-input v-model=\"editGoodsForm.stock\"></el-input>\r\n            </div>\r\n          </div>\r\n          <div style=\"display: flex;margin-top:40px;\">\r\n            <div style=\"font-size:16px;padding:10px 20px;\">描述</div>\r\n            <div style=\"flex:1;margin-right:20px;\">\r\n              <el-input v-model=\"editGoodsForm.introduce\" placeholder=\"输入...\" :clearable=\"true\"></el-input>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </el-form>\r\n      <div slot=\"footer\" style=\"text-align:center;\" class=\"dialog-footer\">\r\n        <el-button style=\"width:43%\" @click=\"cancel()\">取 消</el-button>\r\n        <el-button style=\"width:43%\" type=\"success\" @click=\"editGoods()\">修 改</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      goodsTypeList: [],\r\n      dialogAddMenu: false,\r\n      addMenuForm: {\r\n        name: \"\"\r\n      },\r\n      dialogEditMenu: false,\r\n      editMenuForm: {\r\n        name: \"\",\r\n        id: \"\"\r\n      },\r\n      dialogAddGoods: false,\r\n      addGoodsForm: {\r\n        id: \"\",\r\n        name: \"\",\r\n        stock: \"\",\r\n        price: \"\",\r\n        introduce: \"\",\r\n        isSell: true\r\n      },\r\n      dialogEditGoods: false,\r\n      editGoodsForm: {\r\n        id: \"\",\r\n        gId: \"\",\r\n        name: \"\",\r\n        stock: \"\",\r\n        price: \"\",\r\n        introduce: \"\",\r\n        isSell: true\r\n      },\r\n      formLabelWidth: \"120px\",\r\n      goodsType: 1,\r\n      // img: \"\",\r\n      // name: \"\",\r\n      // stock: \"\",\r\n      // price: \"\",\r\n      // introduce: \"\",\r\n      searchGoods: \"\"\r\n    };\r\n  },\r\n  methods: {\r\n    cancel() {\r\n      this.dialogAddMenu = false;\r\n      this.dialogEditMenu = false;\r\n      this.dialogAddGoods = false;\r\n      this.dialogEditGoods = false;\r\n      this.$message({\r\n        type: \"info\",\r\n        message: \"已取消操作\"\r\n      });\r\n    },\r\n    editMenu() {\r\n      this.$axios.defaults.headers.post[\"Content-Type\"] = \"application/json\";\r\n      this.$axios\r\n        .post(this.$store.state.httpUrl + \"/editGoodsType\", {\r\n          storeId: this.$store.state.storeId,\r\n          goodsType: this.editMenuForm.name,\r\n          id: this.goodsTypeList[this.editMenuForm.id].goodsTypeId\r\n        })\r\n        .then(res => {\r\n          console.log(res.data);\r\n          if (res.data.code === 20000) {\r\n            this.dialogEditMenu = false;\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"修改成功！\"\r\n            });\r\n            this.goodsTypeList[\r\n              this.editMenuForm.id\r\n            ].name = this.editMenuForm.name;\r\n            this.editMenuForm.name = \"\";\r\n          } else if (res.data.code === 20001) {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"修改失败，系统错误，请刷新后再试！\"\r\n            });\r\n          } else if (res.data.code === 20001) {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"修改失败，登录过期，请重新登录！\"\r\n            });\r\n          }\r\n        });\r\n    },\r\n    editGoods() {\r\n      this.$axios\r\n        .post(this.$store.state.httpUrl + \"/editGoods\", {\r\n          storeId: this.$store.state.storeId,\r\n          id: this.goodsTypeList[this.editGoodsForm.id].goodsList[\r\n            this.editGoodsForm.gId\r\n          ].id,\r\n          goodsTypeId: this.goodsTypeList[this.editGoodsForm.id].goodsTypeId,\r\n          goodsName: this.editGoodsForm.name,\r\n          goodsDescribe: this.editGoodsForm.introduce,\r\n          goodsImage: \"http://haozheng.club/images/jichi.png\",\r\n          goodsPrice: this.editGoodsForm.price,\r\n          goodIsSell: this.editGoodsForm.isSell === false ? 0 : 1,\r\n          goodsStock: this.editGoodsForm.stock\r\n        })\r\n        .then(res => {\r\n          console.log(res.data);\r\n          if (res.data.code === 20000) {\r\n            this.dialogEditGoods = false;\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"修改成功！\"\r\n            });\r\n            this.goodsTypeList[this.editGoodsForm.id].goodsList[\r\n              this.editGoodsForm.gId\r\n            ].name = this.editGoodsForm.name;\r\n            this.goodsTypeList[this.editGoodsForm.id].goodsList[\r\n              this.editGoodsForm.gId\r\n            ].introduce = this.editGoodsForm.introduce;\r\n            this.goodsTypeList[this.editGoodsForm.id].goodsList[\r\n              this.editGoodsForm.gId\r\n            ].img = \"http://haozheng.club/images/jichi.png\";\r\n            this.goodsTypeList[this.editGoodsForm.id].goodsList[\r\n              this.editGoodsForm.gId\r\n            ].price = this.editGoodsForm.price;\r\n            this.goodsTypeList[this.editGoodsForm.id].goodsList[\r\n              this.editGoodsForm.gId\r\n            ].stock = this.editGoodsForm.stock;\r\n            this.goodsTypeList[this.editGoodsForm.id].goodsList[\r\n              this.editGoodsForm.gId\r\n            ].isSell = this.editGoodsForm.isSell;\r\n            this.editMenuForm.id = \"\";\r\n            this.editMenuForm.gId = \"\";\r\n            this.editMenuForm.name = \"\";\r\n            this.editMenuForm.stock = \"\";\r\n            this.editMenuForm.price = \"\";\r\n            this.editMenuForm.introduce = \"\";\r\n            this.editMenuForm.isSell = true;\r\n          } else if (res.data.code === 20001) {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"修改失败，系统错误，请刷新后再试！\"\r\n            });\r\n          } else if (res.data.code === 20001) {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"修改失败，登录过期，请重新登录！\"\r\n            });\r\n          }\r\n        });\r\n    },\r\n    addMenu() {\r\n      this.$axios.defaults.headers.post[\"Content-Type\"] = \"application/json\";\r\n      this.$axios\r\n        .post(\r\n          this.$store.state.httpUrl + \"/addGoodsType\",\r\n          JSON.stringify({\r\n            goodsType: this.addMenuForm.name\r\n          })\r\n        )\r\n        .then(res => {\r\n          console.log(res.data);\r\n          if (res.data.code === 20000) {\r\n            this.dialogAddMenu = false;\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"添加成功！\"\r\n            });\r\n            this.goodsTypeList.push({\r\n              goodsTypeId: res.data.data.id,\r\n              name: this.addMenuForm.name,\r\n              goodsList: []\r\n            });\r\n            this.addMenuForm.name = \"\";\r\n          } else if (res.data.code === 20001) {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"添加失败，系统错误，请刷新后再试！\"\r\n            });\r\n          } else if (res.data.code === 20001) {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"添加失败，登录过期，请重新登录！\"\r\n            });\r\n          }\r\n        });\r\n    },\r\n    addGoods() {\r\n      this.$axios.defaults.headers.post[\"Content-Type\"] = \"application/json\";\r\n      this.$axios\r\n        .post(\r\n          this.$store.state.httpUrl + \"/addGoods\",\r\n          JSON.stringify({\r\n            storeId: this.$store.state.storeId,\r\n            goodsTypeId: this.goodsTypeList[this.addGoodsForm.id].goodsTypeId,\r\n            goodsName: this.addGoodsForm.name,\r\n            goodsPrice: this.addGoodsForm.price,\r\n            goodsStock: this.addGoodsForm.stock,\r\n            goodsSell: this.addGoodsForm.sell,\r\n            goodIsSell: this.addGoodsForm.isSell === false ? \"0\" : \"1\",\r\n            goodsDescribe: this.addGoodsForm.introduce,\r\n            goodsImage: \"http://haozheng.club/images/jichi.png\"\r\n          })\r\n        )\r\n        .then(res => {\r\n          console.log(res.data);\r\n          if (res.data.code === 20000) {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"添加成功！\"\r\n            });\r\n            this.dialogAddGoods = false;\r\n            this.goodsTypeList[this.addGoodsForm.id].goodsList.push({\r\n              id: res.data.data.id,\r\n              name: this.addGoodsForm.name,\r\n              img: \"http://haozheng.club/images/jichi.png\",\r\n              stock: this.addGoodsForm.stock,\r\n              price: this.addGoodsForm.price,\r\n              like: 0,\r\n              isSell: this.addGoodsForm.isSell\r\n            });\r\n            this.addGoodsForm.id = \"\";\r\n            this.addGoodsForm.gId = \"\";\r\n            this.addGoodsForm.name = \"\";\r\n            this.addGoodsForm.stock = \"\";\r\n            this.addGoodsForm.price = \"\";\r\n            this.addGoodsForm.introduce = \"\";\r\n            this.addGoodsForm.isSell = true;\r\n          } else if (res.data.code === 20001) {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"添加失败，系统错误，请刷新后再试！\"\r\n            });\r\n          } else if (res.data.code === 20001) {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"添加失败，登录过期，请重新登录！\"\r\n            });\r\n          }\r\n        });\r\n    },\r\n    deleteGoods(id, goodsId) {\r\n      this.$confirm(\"是否确定删除此菜品？\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      })\r\n        .then(() => {\r\n          this.$axios\r\n            .get(\r\n              this.$store.state.httpUrl +\r\n                \"/deleteGoods?goodsId=\" +\r\n                this.goodsTypeList[id].goodsList[goodsId].id\r\n            )\r\n            .then(res => {\r\n              console.log(res.data);\r\n              if (res.data.code === 20000) {\r\n                this.dialogFormVisible = false;\r\n                this.$message({\r\n                  type: \"success\",\r\n                  message: \"删除成功！\"\r\n                });\r\n                this.goodsTypeList[id].goodsList.splice(goodsId, 1);\r\n              } else if (res.data.code === 20001) {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: \"删除失败，系统错误，请刷新后再试！\"\r\n                });\r\n              } else if (res.data.code === 20001) {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: \"删除失败，登录过期，请重新登录！\"\r\n                });\r\n              }\r\n            });\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消删除\"\r\n          });\r\n        });\r\n    },\r\n    deleteMenu(id) {\r\n      this.$confirm(\"是否确定删除此菜单？\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      })\r\n        .then(() => {\r\n          this.$axios\r\n            .get(\r\n              this.$store.state.httpUrl +\r\n                \"/deleteGoodsType?goodsTypeId=\" +\r\n                this.goodsTypeList[id].goodsTypeId\r\n            )\r\n            .then(res => {\r\n              console.log(res.data);\r\n              if (res.data.code === 20000) {\r\n                this.dialogFormVisible = false;\r\n                this.$message({\r\n                  type: \"success\",\r\n                  message: \"删除成功！\"\r\n                });\r\n                this.goodsTypeList.splice(id, 1);\r\n              } else if (res.data.code === 20001) {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: \"删除失败，系统错误，请刷新后再试！\"\r\n                });\r\n              } else if (res.data.code === 20001) {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: \"删除失败，登录过期，请重新登录！\"\r\n                });\r\n              }\r\n            });\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消删除\"\r\n          });\r\n        });\r\n    },\r\n    handlePictureCardPreview(file) {\r\n      this.img = file.url;\r\n    },\r\n    getMenu() {\r\n      if (this.goodsTypeList) {\r\n        this.goodsTypeList = [];\r\n      }\r\n      this.$axios\r\n        .get(this.$store.state.httpUrl + \"/getGoods\")\r\n        .then(res => {\r\n          console.log(res.data.data);\r\n          res.data.data.goodsType.forEach(i => {\r\n            this.goodsTypeList.push({\r\n              goodsTypeId: i.id,\r\n              name: i.goodsType,\r\n              goodsList: []\r\n            });\r\n          });\r\n\r\n          res.data.data.goods.forEach(i => {\r\n            this.goodsTypeList.forEach(e => {\r\n              if (i.goodsTypeId === e.goodsTypeId) {\r\n                e.goodsList.push({\r\n                  id: i.id,\r\n                  name: i.goodsName,\r\n                  img: i.goodsImage,\r\n                  stock: i.goodsStock,\r\n                  price: i.goodsPrice,\r\n                  like: i.goodsGood,\r\n                  isSell: i.goodIsSell === \"0\" ? false : true\r\n                });\r\n              }\r\n            });\r\n          });\r\n        })\r\n        .catch(function(res) {\r\n          console.log(res);\r\n        });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getMenu();\r\n  }\r\n};\r\n</script>\r\n\r\n<style  scoped>\r\n.el-collapse-item {\r\n  box-shadow: 0px 0px 1px 2px rgb(221, 221, 221);\r\n}\r\n</style>"]}]}