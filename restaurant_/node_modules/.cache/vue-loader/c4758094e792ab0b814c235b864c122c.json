{"remainingRequest":"D:\\Vue项目\\restaurant_p\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue项目\\restaurant_p\\src\\components\\register.vue?vue&type=style&index=0&id=8f8a1d9a&lang=s&scoped=true&","dependencies":[{"path":"D:\\Vue项目\\restaurant_p\\src\\components\\register.vue","mtime":1585745256939},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5lbC1pbnB1dF9faW5uZXIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTc5LCAyMzEsIDIyNCk7DQogIGNvbG9yOiByZ2IoOTAsIDkwLCA5MCk7DQogIHdpZHRoOiAyNzBweDsNCiAgYm9yZGVyLXJhZGl1czogMzBweDsNCn0NCg=="},{"version":3,"sources":["register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+MA;AACA;AACA;AACA;AACA;AACA","file":"register.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div style=\"text-align:center;font-family:Franklin Gothic Medium;\">\r\n    <div\r\n      style=\"display:flex;justify-content:space-between;padding:25px 100px;box-shadow: 0px 5px 9px 3px #ddd\"\r\n    >\r\n      <div>\r\n        <img src alt />\r\n        <span>欢迎注册</span>\r\n      </div>\r\n      <div>\r\n        <span>已有账号？</span>\r\n        <span @click=\"toLogin\">请登录></span>\r\n      </div>\r\n    </div>\r\n    <div style=\"width:750px;margin: 100px auto;padding-bottom:30px;\">\r\n      <el-steps :active=\"active\" finish-status=\"success\" align-center>\r\n        <el-step title=\"填写账号信息\"></el-step>\r\n        <el-step title=\"填写店铺信息\"></el-step>\r\n        <el-step title=\"完成\"></el-step>\r\n      </el-steps>\r\n    </div>\r\n    <div v-if=\"active==0\">\r\n      <div style=\"display:flex;width:380px;margin:20px auto;padding-right:30px;\">\r\n        <span style=\"width:130px;margin-top:8px\">名称:</span>\r\n        <el-input v-model=\"name\" placeholder=\"请输入名称\"></el-input>\r\n      </div>\r\n      <div style=\"display:flex;width:380px;margin:20px auto;padding-right:30px;\">\r\n        <span style=\"width:130px;margin-top:8px\">账号:</span>\r\n        <el-input v-model=\"account\" placeholder=\"请输入账号\"></el-input>\r\n      </div>\r\n      <div style=\"display:flex;width:380px;margin:20px auto;padding-right:30px;\">\r\n        <span style=\"width:130px;margin-top:8px\">密码:</span>\r\n        <el-input v-model=\"password\" placeholder=\"请输入密码\" show-password></el-input>\r\n      </div>\r\n      <div style=\"display:flex;width:380px;margin:20px auto;padding-right:30px;\">\r\n        <span style=\"width:130px;margin-top:8px\">再次密码:</span>\r\n        <el-input v-model=\"password2\" placeholder=\"请再次输入密码\" show-password></el-input>\r\n      </div>\r\n      <el-button style=\"width:380px;margin-top:50px;\" type=\"primary\" @click=\"next\">下一步</el-button>\r\n    </div>\r\n    <div v-if=\"active==1\">\r\n      <div style=\"display:flex;width:380px;margin:20px auto;padding-right:30px;\">\r\n        <span style=\"width:130px;margin-top:8px\">店铺名称:</span>\r\n        <el-input v-model=\"storeName\" placeholder=\"请输入店铺名称\"></el-input>\r\n      </div>\r\n      <div style=\"display:flex;width:380px;margin:20px auto;padding-right:30px;\">\r\n        <span style=\"width:130px;margin-top:8px\">店铺简介:</span>\r\n        <el-input v-model=\"storeDescribe\" placeholder=\"请输入店铺简介\"></el-input>\r\n      </div>\r\n      <div style=\"display:flex;width:380px;margin:20px auto;padding-right:30px;\">\r\n        <span style=\"width:130px;margin-top:8px\">营业时间:</span>\r\n        <el-input v-model=\"businessHoursBegin\" style=\"width:160px;\" placeholder=\"起始时间\"></el-input>\r\n        <span style=\"width:60px;margin-top:8px\">到</span>\r\n        <el-input v-model=\"businessHoursEnd\" style=\"width:160px;\" placeholder=\"结束时间\"></el-input>\r\n      </div>\r\n      <el-button style=\"width:380px;margin-top:50px;\" type=\"primary\" @click=\"addAccount()\">下一步</el-button>\r\n    </div>\r\n    <div v-if=\"active==2\">\r\n      <div style=\"display:flex;width:190px;margin:20px auto;text-align:center\">\r\n        <img src=\"image/success.png\" alt />\r\n      </div>\r\n      <div\r\n        style=\"margin-left:50px;margin-top:30px;color:#3e9dd5;font-size:31px;letter-spacing:10px;\"\r\n      >注册成功！</div>\r\n      <div\r\n        style=\"margin-left:50px;margin-top:10px;color:#3e9dd5;font-size:34px;letter-spacing:10px;\"\r\n      >欢迎您加入！</div>\r\n      <el-button style=\"width:380px;margin-top:50px;\" type=\"primary\" @click=\"login\">登录</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      active: 0,\r\n      name: \"\",\r\n      account: \"\",\r\n      password: \"\",\r\n      password2: \"\",\r\n      storeName: \"\",\r\n      storeTxUrl: \"http://haozheng.club/images/dian.jpg\",\r\n      businessHoursBegin: \"\",\r\n      businessHoursEnd: \"\",\r\n      storeDescribe: \"\",\r\n      rate: 5,\r\n      sellCount: 0,\r\n      businessStatus: 1\r\n    };\r\n  },\r\n  methods: {\r\n    toLogin() {\r\n      this.$router.push(\"/login\");\r\n    },\r\n    login() {\r\n      if (this.active++ > 2) this.active = 0;\r\n      this.$router.push(\"/\");\r\n    },\r\n    next() {\r\n      if (this.password != this.password2) {\r\n        this.$elementUI.Message.error(\"两次密码不一致!\");\r\n      } else {\r\n        if (this.active++ > 2) this.active = 0;\r\n      }\r\n    },\r\n    addAccount() {\r\n      this.$axios.defaults.headers.post[\"Content-Type\"] = \"application/json\";\r\n      this.$axios\r\n        .post(\r\n          this.$store.state.httpUrl + \"/addHost\",\r\n          JSON.stringify({\r\n            account: this.account,\r\n            name: this.name,\r\n            password: this.password\r\n          })\r\n        )\r\n        .then(res => {\r\n          console.log(res.data);\r\n\r\n          if (res.data.code === 20000) {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"账号注册成功！\"\r\n            });\r\n            this.$axios\r\n              .post(\r\n                this.$store.state.httpUrl + \"/loginAdmin\",\r\n                JSON.stringify({\r\n                  account: this.account,\r\n                  password: this.password\r\n                })\r\n              )\r\n              .then(r => {\r\n                console.log(r.data);\r\n                console.log(r.data.data.token);\r\n                if (r.data.code === 20000) {\r\n                  this.$store.commit(\"setToken\", r.data.data.token);\r\n                  this.$store.commit(\"login\", r.data.data.admin);\r\n                  this.$store.commit(\"setHostId\", r.data.data.admin.id);\r\n                  localStorage.setItem(\"token\", r.data.data.token);\r\n                  this.addStore();\r\n                } else if (r.data.code === 20001) {\r\n                  this.$message({\r\n                    type: \"error\",\r\n                    message: \"出现错误，请重试！\"\r\n                  });\r\n                } else if (r.data.code === 20004) {\r\n                  this.$message({\r\n                    type: \"error\",\r\n                    message: \"出现错误，请重试\"\r\n                  });\r\n                }\r\n              });\r\n          } else if (res.data.code === 20001) {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"请正确填写信息,或账号已存在！\"\r\n            });\r\n          }\r\n        });\r\n    },\r\n    addStore() {\r\n      this.$axios\r\n        .post(\r\n          this.$store.state.httpUrl + \"/addStore\",\r\n          JSON.stringify({\r\n            storeName: this.storeName,\r\n            storeTxUrl: this.storeTxUrl,\r\n            businessHoursBegin: this.businessHoursBegin,\r\n            businessHoursEnd: this.businessHoursEnd,\r\n            storeDescribe: this.storeDescribe,\r\n            hostId: this.$router.hostId,\r\n            businessStatus: this.businessStatus,\r\n            rate: this.rate,\r\n            sellCount: this.sellCount\r\n          })\r\n        )\r\n        .then(res => {\r\n          console.log(res.data);\r\n          if (res.data.code === 20000) {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"店铺注册成功！\"\r\n            });\r\n            if (this.active++ > 2) this.active = 0;\r\n          } else if (res.data.code === 20001) {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"店铺注册出现错误！\"\r\n            });\r\n          }\r\n        });\r\n    }\r\n  },\r\n  mounted(){\r\n    window.location.replace();\r\n    window.location.reload()\r\n  },\r\n  created(){\r\n    window.location.replace();\r\n    window.location.reload()\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"s\" scoped>\r\n.el-input__inner {\r\n  background-color: rgb(179, 231, 224);\r\n  color: rgb(90, 90, 90);\r\n  width: 270px;\r\n  border-radius: 30px;\r\n}\r\n</style>"]}]}