{"remainingRequest":"D:\\Vue项目\\restaurant_p\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue项目\\restaurant_p\\src\\components\\order.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Vue项目\\restaurant_p\\src\\components\\order.vue","mtime":1583222294476},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHN0YXRlOiBbDQogICAgICAgIHsNCiAgICAgICAgICB2YWx1ZTogMSwNCiAgICAgICAgICBsYWJlbDogIuato+WcqOWItuS9nCINCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHZhbHVlOiAyLA0KICAgICAgICAgIGxhYmVsOiAi562J5b6F5LiK6I+cIg0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdmFsdWU6IDMsDQogICAgICAgICAgbGFiZWw6ICLlt7LlrozmiJAiDQogICAgICAgIH0NCiAgICAgIF0sDQogICAgICBvcmRlcjogIiIsDQogICAgICBvcmRlclRhYmxlOiBbXQ0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBlZGl0U3RhdGUoaWQpIHsNCiAgICAgIHRoaXMuJGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsiQ29udGVudC1UeXBlIl0gPSAiYXBwbGljYXRpb24vanNvbiI7DQogICAgICB0aGlzLiRheGlvcw0KICAgICAgICAucG9zdCh0aGlzLiRzdG9yZS5zdGF0ZS5odHRwVXJsICsgIi9lZGl0T3JkZXJTdGF0dXMiLCB7DQogICAgICAgICAgb3JkZXJTdGF0dXM6IHBhcnNlSW50KHRoaXMub3JkZXJUYWJsZVtpZF0uc3RhdGUpLA0KICAgICAgICAgIGlkOiB0aGlzLm9yZGVyVGFibGVbaWRdLm9yZGVySWQNCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7DQogICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMDAwKSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICAgICAgICBtZXNzYWdlOiAi5L+u5pS554q25oCB5oiQ5Yqf77yBIg0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfSBlbHNlIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDAwMSkgew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsDQogICAgICAgICAgICAgIG1lc3NhZ2U6ICLkv67mlLnnirbmgIHlpLHotKXvvIzns7vnu5/plJnor6/vvIEiDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHRoaXMuZ2V0TWVudSgpOw0KICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwMDEpIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLA0KICAgICAgICAgICAgICBtZXNzYWdlOiAi5L+u5pS554q25oCB5aSx6LSl77yM55m75b2V6L+H5pyf77yM6K+36YeN5paw55m75b2V77yBIg0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB0aGlzLmdldE1lbnUoKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgZGVsZXRlT3JkZXIoaWQsIHJvd3MpIHsNCiAgICAgIHRoaXMuJGNvbmZpcm0oIuaYr+WQpuehruWumuWIoOmZpOatpOiuouWNle+8nyIsICLmj5DnpLoiLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsDQogICAgICAgIHR5cGU6ICJ3YXJuaW5nIg0KICAgICAgfSkNCiAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgIHRoaXMuJGF4aW9zDQogICAgICAgICAgICAuZ2V0KA0KICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5odHRwVXJsICsNCiAgICAgICAgICAgICAgICAiL2RlbGV0ZU9yZGVyP2lkPSIgKw0KICAgICAgICAgICAgICAgIHRoaXMub3JkZXJUYWJsZVtpZF0ub3JkZXJJZA0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOw0KICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwMDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5Yig6Zmk5oiQ5Yqf77yBIg0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHJvd3Muc3BsaWNlKGlkLCAxKTsNCiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDAwMSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwNCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLliKDpmaTlpLHotKXvvIzns7vnu5/plJnor6/vvIEiDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgdGhpcy5nZXRPcmRlcigpOw0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMDAxKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLA0KICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuWIoOmZpOWksei0pe+8jOeZu+W9lei/h+acn++8jOivt+mHjeaWsOeZu+W9le+8gSINCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB0aGlzLmdldE9yZGVyKCk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKCkgPT4gew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogImluZm8iLA0KICAgICAgICAgICAgbWVzc2FnZTogIuW3suWPlua2iOWIoOmZpCINCiAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICBnZXRPcmRlcigpIHsNCiAgICAgIGlmICh0aGlzLm9yZGVyVGFibGUpIHsNCiAgICAgICAgdGhpcy5vcmRlclRhYmxlID0gW107DQogICAgICB9DQogICAgICB0aGlzLiRheGlvcw0KICAgICAgICAuZ2V0KHRoaXMuJHN0b3JlLnN0YXRlLmh0dHBVcmwgKyAiL2dldE9yZGVyQWRtaW4iKQ0KICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsNCiAgICAgICAgICByZXMuZGF0YS5kYXRhLmZvckVhY2goaSA9PiB7DQogICAgICAgICAgICB0aGlzLm9yZGVyVGFibGUucHVzaCh7DQogICAgICAgICAgICAgIGlkOiAxLA0KICAgICAgICAgICAgICBvcmRlcklkOiBpLm9yZGVyLmlkLA0KICAgICAgICAgICAgICB0aW1lOg0KICAgICAgICAgICAgICAgIG5ldyBEYXRlKGkub3JkZXIub3JkZXJQYXlUaW1lKQ0KICAgICAgICAgICAgICAgICAgLnRvTG9jYWxlRGF0ZVN0cmluZygpDQogICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXC8vZywgIi0iKSArDQogICAgICAgICAgICAgICAgIiAiICsNCiAgICAgICAgICAgICAgICBuZXcgRGF0ZShpLm9yZGVyLm9yZGVyUGF5VGltZSkudG9UaW1lU3RyaW5nKCkuc3Vic3RyKDAsIDgpLA0KICAgICAgICAgICAgICB0YWJsZTogaS5vcmRlci5vcmRlclRhYmxlLA0KICAgICAgICAgICAgICBzdGF0ZTogaS5vcmRlci5vcmRlclN0YXR1cywNCiAgICAgICAgICAgICAgb3JkZXI6IGkub3JkZXIuaWQsDQogICAgICAgICAgICAgIGN1c3RvbWVyOiBpLm9yZGVyLnVzZXJOYW1lLA0KICAgICAgICAgICAgICBjb3VudDogaS5vcmRlci5vcmRlckNvdW50T3JpZ2luYWwsDQogICAgICAgICAgICAgIGRpc2NvdW50OiBpLm9yZGVyLm9yZGVyQ291bnRBY3R1YWwNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goZnVuY3Rpb24ocmVzKSB7DQogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsNCiAgICAgICAgfSk7DQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuZ2V0T3JkZXIoKTsNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["order.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"order.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div style=\"font-family:Franklin Gothic Medium;padding:25px 40px;\">\r\n    <div\r\n      style=\"box-shadow:0 0 3px 1px #ccc;background-color:#fff;padding:20px 0px;border-radius: 10px;\"\r\n    >\r\n      <div\r\n        style=\"padding:0px 20px;display:flex;align-items:center;margin-top: 5px;margin-bottom:30px;\"\r\n      >\r\n        <div style=\"margin-right:5px;\">\r\n          <i style=\"font-size:20px;\" class=\"el-icon-s-custom\"></i>\r\n        </div>\r\n        <div style=\"font-size: 16px;font-weight: 700;\">查看订单</div>\r\n      </div>\r\n      <hr\r\n        style=\"width:100%;color: rgb(236, 236, 236);border:none;border-top:2px solid;margin-bottom:25px;\"\r\n      />\r\n      <div style=\"margin-bottom:30px;padding:0px 20px;\">\r\n        <el-input style=\"width:250px;\" placeholder=\"请输入订单号\" v-model=\"order\" clearable></el-input>\r\n      </div>\r\n      <div style=\"padding:0px 20px;\">\r\n        <el-table row-key=\"orderId\" stripe :data=\"orderTable\" border style=\"width: 100%;\">\r\n          <el-table-column prop=\"time\" label=\"时间\" align=\"center\"></el-table-column>\r\n          <el-table-column prop=\"order\" label=\"订单号\" align=\"center\" min-width=\"90px\"></el-table-column>\r\n          <el-table-column prop=\"customer\" label=\"顾客\" align=\"center\"></el-table-column>\r\n          <el-table-column prop=\"table\" label=\"桌号\" align=\"center\" width=\"80px\"></el-table-column>\r\n          <el-table-column prop=\"count\" label=\"总价（元）\" align=\"center\"></el-table-column>\r\n          <el-table-column prop=\"discount\" label=\"折后（元）\" align=\"center\"></el-table-column>\r\n          <el-table-column prop=\"state\" label=\"状态\" align=\"center\" width=\"130px\">\r\n            <template slot-scope=\"scope1\">\r\n              <el-cascader\r\n                @change=\"editState(scope1.$index)\"\r\n                v-model=\"orderTable[scope1.$index].state\"\r\n                :options=\"state\"\r\n              ></el-cascader>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column fixed=\"right\" label=\"操作\" align=\"center\" width=\"90px\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                @click.prevent=\"deleteOrder(scope.$index, orderTable)\"\r\n                type=\"danger\"\r\n                size=\"mini\"\r\n              >删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      state: [\r\n        {\r\n          value: 1,\r\n          label: \"正在制作\"\r\n        },\r\n        {\r\n          value: 2,\r\n          label: \"等待上菜\"\r\n        },\r\n        {\r\n          value: 3,\r\n          label: \"已完成\"\r\n        }\r\n      ],\r\n      order: \"\",\r\n      orderTable: []\r\n    };\r\n  },\r\n  methods: {\r\n    editState(id) {\r\n      this.$axios.defaults.headers.post[\"Content-Type\"] = \"application/json\";\r\n      this.$axios\r\n        .post(this.$store.state.httpUrl + \"/editOrderStatus\", {\r\n          orderStatus: parseInt(this.orderTable[id].state),\r\n          id: this.orderTable[id].orderId\r\n        })\r\n        .then(res => {\r\n          console.log(res.data);\r\n          if (res.data.code === 20000) {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"修改状态成功！\"\r\n            });\r\n          } else if (res.data.code === 20001) {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"修改状态失败，系统错误！\"\r\n            });\r\n            this.getMenu();\r\n          } else if (res.data.code === 20001) {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"修改状态失败，登录过期，请重新登录！\"\r\n            });\r\n            this.getMenu();\r\n          }\r\n        });\r\n    },\r\n    deleteOrder(id, rows) {\r\n      this.$confirm(\"是否确定删除此订单？\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      })\r\n        .then(() => {\r\n          this.$axios\r\n            .get(\r\n              this.$store.state.httpUrl +\r\n                \"/deleteOrder?id=\" +\r\n                this.orderTable[id].orderId\r\n            )\r\n            .then(res => {\r\n              console.log(res.data);\r\n              if (res.data.code === 20000) {\r\n                this.dialogFormVisible = false;\r\n                this.$message({\r\n                  type: \"success\",\r\n                  message: \"删除成功！\"\r\n                });\r\n                rows.splice(id, 1);\r\n              } else if (res.data.code === 20001) {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: \"删除失败，系统错误！\"\r\n                });\r\n                this.getOrder();\r\n              } else if (res.data.code === 20001) {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: \"删除失败，登录过期，请重新登录！\"\r\n                });\r\n                this.getOrder();\r\n              }\r\n            });\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消删除\"\r\n          });\r\n        });\r\n    },\r\n    getOrder() {\r\n      if (this.orderTable) {\r\n        this.orderTable = [];\r\n      }\r\n      this.$axios\r\n        .get(this.$store.state.httpUrl + \"/getOrderAdmin\")\r\n        .then(res => {\r\n          console.log(res.data);\r\n          res.data.data.forEach(i => {\r\n            this.orderTable.push({\r\n              id: 1,\r\n              orderId: i.order.id,\r\n              time:\r\n                new Date(i.order.orderPayTime)\r\n                  .toLocaleDateString()\r\n                  .replace(/\\//g, \"-\") +\r\n                \" \" +\r\n                new Date(i.order.orderPayTime).toTimeString().substr(0, 8),\r\n              table: i.order.orderTable,\r\n              state: i.order.orderStatus,\r\n              order: i.order.id,\r\n              customer: i.order.userName,\r\n              count: i.order.orderCountOriginal,\r\n              discount: i.order.orderCountActual\r\n            });\r\n          });\r\n        })\r\n        .catch(function(res) {\r\n          console.log(res);\r\n        });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getOrder();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]}]}