{"remainingRequest":"D:\\Vue项目\\restaurant_p\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue项目\\restaurant_p\\src\\components\\order.vue?vue&type=style&index=0&id=5ffcfc6e&scoped=true&lang=css&","dependencies":[{"path":"D:\\Vue项目\\restaurant_p\\src\\components\\order.vue","mtime":1583055833690},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouY2VudGVyew0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQo="},{"version":3,"sources":["order.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqLA;AACA;AACA","file":"order.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div style=\"font-family:Franklin Gothic Medium;padding:25px 40px;\">\r\n    <div\r\n      style=\"box-shadow:0 0 3px 1px #ccc;background-color:#fff;padding:20px 0px;border-radius: 10px;\"\r\n    >\r\n      <div\r\n        style=\"padding:0px 20px;display:flex;align-items:center;margin-top: 5px;margin-bottom:30px;\"\r\n      >\r\n        <div style=\"margin-right:5px;\">\r\n          <i style=\"font-size:20px;\" class=\"el-icon-s-custom\"></i>\r\n        </div>\r\n        <div style=\"font-size: 16px;font-weight: 700;\">查看订单</div>\r\n      </div>\r\n      <hr\r\n        style=\"width:100%;color: rgb(236, 236, 236);border:none;border-top:2px solid;margin-bottom:25px;\"\r\n      />\r\n      <div style=\"margin-bottom:30px;padding:0px 20px;\">\r\n        <el-input style=\"width:250px;\" placeholder=\"请输入订单号\" v-model=\"order\" clearable></el-input>\r\n      </div>\r\n      <div style=\"padding:0px 20px;\">\r\n        <el-table row-key=\"orderId\" :header-cell-style=\"center\" :cell-style=\"center\" stripe :data=\"orderTable\" border style=\"width: 100%;\">\r\n          <el-table-column prop=\"time\" label=\"时间\"></el-table-column>\r\n          <el-table-column prop=\"order\" label=\"订单号\"></el-table-column>\r\n          <el-table-column prop=\"customer\" label=\"顾客\"></el-table-column>\r\n          <el-table-column prop=\"table\" label=\"桌号\" width=\"80px\"></el-table-column>\r\n          <el-table-column prop=\"count\" label=\"总价（元）\"></el-table-column>\r\n          <el-table-column prop=\"discount\" label=\"折后（元）\"></el-table-column>\r\n          <el-table-column prop=\"state\" label=\"状态\">\r\n            <template slot-scope=\"scope1\">\r\n              <el-cascader\r\n                @change=\"editState(scope1.$index)\"\r\n                v-model=\"orderTable[scope1.$index].state\"\r\n                :options=\"state\"\r\n              ></el-cascader>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column fixed=\"right\" label=\"操作\" width=\"90px\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                @click.prevent=\"deleteOrder(scope.$index, orderTable)\"\r\n                type=\"danger\"\r\n                size=\"mini\"\r\n              >删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      state: [\r\n        {\r\n          value: 1,\r\n          label: \"正在制作\"\r\n        },\r\n        {\r\n          value: 2,\r\n          label: \"等待上菜\"\r\n        },\r\n        {\r\n          value: 3,\r\n          label: \"已完成\"\r\n        }\r\n      ],\r\n\r\n      order: \"\",\r\n      orderTable: []\r\n    };\r\n  },\r\n  methods: {\r\n    editState(id) {\r\n      this.$axios.defaults.headers.post[\"Content-Type\"] = \"application/json\";\r\n      this.$axios\r\n        .post(this.$store.state.httpUrl + \"/editOrderGoodsStatus\", {\r\n          orderStatus: this.orderTable[id].state,\r\n          id: this.orderTable[id].orderId\r\n        })\r\n        .then(res => {\r\n          console.log(res.data);\r\n          if (res.data.code === 20000) {\r\n            this.dialogEditMenu = false;\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"修改状态成功！\"\r\n            });\r\n            this.getMenu();\r\n            this.editMenuForm.name = \"\";\r\n          } else if (res.data.code === 20001) {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"修改状态失败，系统错误！\"\r\n            });\r\n          } else if (res.data.code === 20001) {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"修改状态失败，登录过期，请重新登录！\"\r\n            });\r\n          }\r\n        });\r\n    },\r\n    deleteOrder(id) {\r\n      this.$confirm(\"是否确定删除此订单？\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      })\r\n        .then(() => {\r\n          this.$axios\r\n            .get(\r\n              this.$store.state.httpUrl +\r\n                \"/deleteOrder?id=\" +\r\n                this.orderTable[id].orderId\r\n            )\r\n            .then(res => {\r\n              console.log(res.data);\r\n              if (res.data.code === 20000) {\r\n                this.dialogFormVisible = false;\r\n                this.$message({\r\n                  type: \"success\",\r\n                  message: \"删除成功！\"\r\n                });\r\n                this.getOrder();\r\n              } else if (res.data.code === 20001) {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: \"删除失败，系统错误！\"\r\n                });\r\n              } else if (res.data.code === 20001) {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: \"删除失败，登录过期，请重新登录！\"\r\n                });\r\n              }\r\n            });\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消删除\"\r\n          });\r\n        });\r\n    },\r\n    getOrder() {\r\n      if (this.orderTable) {\r\n        this.orderTable = [];\r\n      }\r\n      this.$axios\r\n        .get(this.$store.state.httpUrl + \"/getOrderAdmin\")\r\n        .then(res => {\r\n          console.log(res.data);\r\n          res.data.data.forEach(i => {\r\n            this.orderTable.push({\r\n              id: 1,\r\n              orderId: i.order.id,\r\n              time: i.order.orderPayTime,\r\n              table: i.order.orderTable,\r\n              state: i.order.orderStatus,\r\n              order: i.order.id,\r\n              customer: i.order.userName,\r\n              count: i.order.orderCountOriginal,\r\n              discount: i.order.orderCountActual\r\n            });\r\n          });\r\n        })\r\n        .catch(function(res) {\r\n          console.log(res);\r\n        });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getOrder();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.center{\r\n  text-align: center;\r\n}\r\n</style>"]}]}