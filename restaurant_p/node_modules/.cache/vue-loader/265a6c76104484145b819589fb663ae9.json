{"remainingRequest":"D:\\Vue项目\\restaurant_p\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue项目\\restaurant_p\\src\\components\\kitchenManagenment.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Vue项目\\restaurant_p\\src\\components\\kitchenManagenment.vue","mtime":1586273863810},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue项目\\restaurant_p\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIG9yZGVyTnVtYmVyOiAxLA0KICAgICAgb3JkZXJMaXN0OiBbXQ0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBmaW5pc2hPcmRlcihpZCkgew0KICAgICAgdGhpcy4kYXhpb3MNCiAgICAgICAgLnBvc3QodGhpcy4kc3RvcmUuc3RhdGUuaHR0cFVybCArICIvZWRpdE9yZGVyU3RhdHVzIiwgew0KICAgICAgICAgIG9yZGVyU3RhdHVzOiArK3RoaXMub3JkZXJMaXN0W2lkXS5zdGF0ZSwNCiAgICAgICAgICBpZDogdGhpcy5vcmRlckxpc3RbaWRdLm9yZGVySWQNCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7DQogICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMDAwKSB7DQogICAgICAgICAgICB0aGlzLm9yZGVyTGlzdFtpZF0uZ29vZHNMaXN0LmZvckVhY2goaSA9PiB7DQogICAgICAgICAgICAgIGkuc3RhdGUgPSAyOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB0aGlzLm9yZGVyTGlzdFtpZF0uc3RhdGUgPSAyOw0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICAgICAgbWVzc2FnZTogIuivpeiuouWNleiPnOWTgeWFqOmDqOWujOaIkO+8gSINCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAtLXRoaXMub3JkZXJMaXN0W2lkXS5zdGF0ZTsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLA0KICAgICAgICAgICAgICBtZXNzYWdlOiAi5L+u5pS554q25oCB5aSx6LSl77yM6K+35Yi35paw5ZCO6YeN6K+V77yBIg0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIGZpbmlzaEdvb2RzKGlkLCBnb29kc0lkKSB7DQogICAgICB0aGlzLiRheGlvcw0KICAgICAgICAucG9zdCh0aGlzLiRzdG9yZS5zdGF0ZS5odHRwVXJsICsgIi9lZGl0T3JkZXJHb29kc1N0YXR1cyIsIHsNCiAgICAgICAgICBzdGF0dXM6ICsrdGhpcy5vcmRlckxpc3RbaWRdLmdvb2RzTGlzdFtnb29kc0lkXS5zdGF0ZSwNCiAgICAgICAgICBvcmRlcklkOiB0aGlzLm9yZGVyTGlzdFtpZF0ub3JkZXJJZCwNCiAgICAgICAgICBpZDogdGhpcy5vcmRlckxpc3RbaWRdLmdvb2RzTGlzdFtnb29kc0lkXS5pZA0KICAgICAgICB9KQ0KICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsNCiAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwMDApIHsNCiAgICAgICAgICAgIHZhciBuID0gdHJ1ZTsNCiAgICAgICAgICAgIHRoaXMub3JkZXJMaXN0W2lkXS5nb29kc0xpc3RbZ29vZHNJZF0uc3RhdGUgPSAyOw0KICAgICAgICAgICAgdGhpcy5vcmRlckxpc3RbaWRdLmdvb2RzTGlzdC5mb3JFYWNoKHIgPT4gew0KICAgICAgICAgICAgICBpZiAoci5zdGF0ZSA9PSAxKSB7DQogICAgICAgICAgICAgICAgbiA9IGZhbHNlOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGlmIChuKSB7DQogICAgICAgICAgICAgIHRoaXMuZmluaXNoT3JkZXIoaWQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICAgICAgbWVzc2FnZTogIuivpeiuouWNleiPnOWTgeWFqOmDqOWujOaIkO+8gSINCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAtLXRoaXMub3JkZXJMaXN0W2lkXS5nb29kc0xpc3RbZ29vZHNJZF0uc3RhdGU7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwNCiAgICAgICAgICAgICAgbWVzc2FnZTogIuS/ruaUueeKtuaAgeWksei0pe+8jOivt+WIt+aWsOWQjumHjeivle+8gSINCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfSwNCiAgICBnZXRPcmRlcigpIHsNCiAgICAgIHRoaXMuJGF4aW9zDQogICAgICAgIC5nZXQodGhpcy4kc3RvcmUuc3RhdGUuaHR0cFVybCArICIvZ2V0T3JkZXJBZG1pbiIpDQogICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOw0KICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDIwMDAwKSB7DQogICAgICAgICAgICB2YXIgbiA9IDA7DQogICAgICAgICAgICByZXMuZGF0YS5kYXRhLmZvckVhY2goaSA9PiB7DQogICAgICAgICAgICAgIHRoaXMub3JkZXJMaXN0LnB1c2goew0KICAgICAgICAgICAgICAgIG9yZGVySWQ6IGkub3JkZXIuaWQsDQogICAgICAgICAgICAgICAgdGltZTogaS5vcmRlci5vcmRlclBheVRpbWUsDQogICAgICAgICAgICAgICAgdGFibGU6IGkub3JkZXIub3JkZXJUYWJsZSwNCiAgICAgICAgICAgICAgICBzdGF0ZTogaS5vcmRlci5vcmRlclN0YXR1cywNCiAgICAgICAgICAgICAgICBnb29kc0xpc3Q6IFtdDQogICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgIGkub3JkZXJHb29kc0xpc3QuZm9yRWFjaChnID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLm9yZGVyTGlzdFtuXS5nb29kc0xpc3QucHVzaCh7DQogICAgICAgICAgICAgICAgICBpZDogZy5pZCwNCiAgICAgICAgICAgICAgICAgIGdvb2RzSWQ6IGcuZ29vZHNJZCwNCiAgICAgICAgICAgICAgICAgIGltZzogZy5nb29kc0ltYWdlLA0KICAgICAgICAgICAgICAgICAgbmFtZTogZy5nb29kc05hbWUsDQogICAgICAgICAgICAgICAgICBudW06IGcuZ29vZHNOdW0sDQogICAgICAgICAgICAgICAgICBzdGF0ZTogZy5zdGF0dXMNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIG4rKzsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKHJlcykgew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgIH0pOw0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmdldE9yZGVyKCk7DQogIH0NCn07DQo="},{"version":3,"sources":["kitchenManagenment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"kitchenManagenment.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div style=\"min-width:1300px;font-family:Franklin Gothic Medium;padding:25px 50px;\">\r\n    <div\r\n      style=\"box-shadow:0 0 3px 1px #ccc;background-color:#fdfdfd;border-radius:10px 10px 0 0;padding-top:20px;text-align:center;\"\r\n    >\r\n      <div style=\"margin-bottom:20px;margin-right:22px;margin-left:70px;\">\r\n        <el-row :gutter=\"10\">\r\n          <el-col :span=\"3\" :offset=\"0\">\r\n            <div style=\"padding-left:10px;\" class=\"grid-content bg-purple\">订单号</div>\r\n          </el-col>\r\n          <el-col :span=\"4\" :offset=\"11\">\r\n            <div style=\"padding-right:10px;\" class=\"grid-content bg-purple\">下单时间</div>\r\n          </el-col>\r\n          <el-col :span=\"2\">\r\n            <div style=\"padding-right:10px;\" class=\"grid-content bg-purple\">桌号</div>\r\n          </el-col>\r\n          <el-col :span=\"3\" :offset=\"1\">\r\n            <div class=\"grid-content bg-purple\">操作</div>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n      <el-collapse v-model=\"orderNumber\">\r\n        <div v-for=\"(i,id) in orderList\" :key=\"id\">\r\n          <el-collapse-item :name=\"id+1\">\r\n            <template slot=\"title\">\r\n              <div style=\"flex:1;text-align:center;margin-left:40px;\">\r\n                <el-row :gutter=\"10\">\r\n                  <el-col :span=\"3\">\r\n                    <div style=\"display:flex;\">\r\n                      <div style=\"margin-right:10px;margin-top:3px;\">\r\n                        <i class=\"el-icon-more\" style=\"font-size:20px;\"></i>\r\n                      </div>\r\n                      <div style=\"font-size:16px;\" class=\"grid-content bg-purple\">{{i.orderId}}</div>\r\n                    </div>\r\n                  </el-col>\r\n                  <el-col :span=\"4\" :offset=\"11\">\r\n                    <div\r\n                      style=\"font-size:16px;min-width:150px;\"\r\n                      class=\"grid-content bg-purple\"\r\n                    >{{new Date(i.time).toLocaleDateString().replace(/\\//g, \"-\") + \" \" + new Date(i.time).toTimeString().substr(0, 8)}}</div>\r\n                  </el-col>\r\n                  <el-col :span=\"2\">\r\n                    <div style=\"font-size:16px;\" class=\"grid-content bg-purple\">{{i.table}}</div>\r\n                  </el-col>\r\n                  <el-col :span=\"3\" :offset=\"1\">\r\n                    <div class=\"grid-content bg-purple\">\r\n                      <el-button\r\n                        v-if=\"i.state==1\"\r\n                        v-model=\"i.state\"\r\n                        @click.stop=\"finishOrder(id)\"\r\n                        style=\"background-color:#fff;padding:7px 10px;font-size:17px;\"\r\n                        type=\"primary\"\r\n                        plain\r\n                        disabled\r\n                      >全部完成</el-button>\r\n                      <el-button\r\n                        v-if=\"i.state!=1\"\r\n                        style=\"padding:7px 10px;font-size:17px;\"\r\n                        type=\"info\"\r\n                        disabled\r\n                        plain\r\n                      >已全部完成</el-button>\r\n                    </div>\r\n                  </el-col>\r\n                </el-row>\r\n              </div>\r\n            </template>\r\n            <div style=\"margin:30px 0;\">\r\n              <div v-for=\"(g,goodsId) in i.goodsList\" :key=\"goodsId\">\r\n                <div style=\"display: flex;margin-top:20px;justify-content: space-between;\">\r\n                  <div\r\n                    style=\"margin-left:100px;margin-right:5px;flex:1;color:rgb(97, 97, 97);text-align:center;padding-right:20px;\"\r\n                  >\r\n                    <el-row :gutter=\"10\">\r\n                      <el-col :span=\"3\" :offset=\"3\">\r\n                        <div class=\"grid-content bg-purple\">\r\n                          <img\r\n                            style=\"width:90px;border: 1px dashed rgb(168, 168, 168) ;\"\r\n                            :src=\"g.img\"\r\n                            alt\r\n                          />\r\n                        </div>\r\n                      </el-col>\r\n                      <el-col :span=\"3\">\r\n                        <div\r\n                          style=\"margin-top:25px; font-size:16px;\"\r\n                          class=\"grid-content bg-purple\"\r\n                        >{{g.name}}</div>\r\n                      </el-col>\r\n\r\n                      <el-col :span=\"2\">\r\n                        <div\r\n                          style=\"margin-top:25px;font-size:16px;\"\r\n                          class=\"grid-content bg-purple\"\r\n                        >x{{g.num}}</div>\r\n                      </el-col>\r\n                      <el-col :span=\"3\">\r\n                        <div\r\n                          style=\"margin-top:25px;font-size:16px;\"\r\n                          class=\"grid-content bg-purple\"\r\n                          :class=\"{'g':g.state!=1 ,'r':g.state==1}\"\r\n                        >{{(g.state==1)?\"正在制作\":\"已完成\"}}</div>\r\n                      </el-col>\r\n                      <el-col :span=\"3\" :offset=\"7\">\r\n                        <div class=\"grid-content bg-purple\">\r\n                          <div style=\"padding-top:20px;margin:0 auto\">\r\n                            <el-button\r\n                              v-if=\"g.state==1\"\r\n                              v-model=\"g.state\"\r\n                              @click=\"finishGoods(id,goodsId)\"\r\n                              style=\"background-color:#fff;padding:7px 10px;font-size:17px;\"\r\n                              type=\"primary\"\r\n                              plain\r\n                              disabled\r\n                            >完成</el-button>\r\n                            <el-button\r\n                              v-if=\"g.state!=1\"\r\n                              style=\"padding:7px 10px;font-size:17px;\"\r\n                              type=\"info\"\r\n                              disabled\r\n                              plain\r\n                            >已完成</el-button>\r\n                          </div>\r\n                        </div>\r\n                      </el-col>\r\n                    </el-row>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </el-collapse-item>\r\n        </div>\r\n      </el-collapse>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      orderNumber: 1,\r\n      orderList: []\r\n    };\r\n  },\r\n  methods: {\r\n    finishOrder(id) {\r\n      this.$axios\r\n        .post(this.$store.state.httpUrl + \"/editOrderStatus\", {\r\n          orderStatus: ++this.orderList[id].state,\r\n          id: this.orderList[id].orderId\r\n        })\r\n        .then(res => {\r\n          console.log(res.data);\r\n          if (res.data.code === 20000) {\r\n            this.orderList[id].goodsList.forEach(i => {\r\n              i.state = 2;\r\n            });\r\n            this.orderList[id].state = 2;\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"该订单菜品全部完成！\"\r\n            });\r\n          } else {\r\n            --this.orderList[id].state;\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"修改状态失败，请刷新后重试！\"\r\n            });\r\n          }\r\n        });\r\n    },\r\n    finishGoods(id, goodsId) {\r\n      this.$axios\r\n        .post(this.$store.state.httpUrl + \"/editOrderGoodsStatus\", {\r\n          status: ++this.orderList[id].goodsList[goodsId].state,\r\n          orderId: this.orderList[id].orderId,\r\n          id: this.orderList[id].goodsList[goodsId].id\r\n        })\r\n        .then(res => {\r\n          console.log(res.data);\r\n          if (res.data.code === 20000) {\r\n            var n = true;\r\n            this.orderList[id].goodsList[goodsId].state = 2;\r\n            this.orderList[id].goodsList.forEach(r => {\r\n              if (r.state == 1) {\r\n                n = false;\r\n              }\r\n            });\r\n            if (n) {\r\n              this.finishOrder(id);\r\n            }\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"该订单菜品全部完成！\"\r\n            });\r\n          } else {\r\n            --this.orderList[id].goodsList[goodsId].state;\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"修改状态失败，请刷新后重试！\"\r\n            });\r\n          }\r\n        });\r\n    },\r\n    getOrder() {\r\n      this.$axios\r\n        .get(this.$store.state.httpUrl + \"/getOrderAdmin\")\r\n        .then(res => {\r\n          console.log(res.data);\r\n          if (res.data.code == 20000) {\r\n            var n = 0;\r\n            res.data.data.forEach(i => {\r\n              this.orderList.push({\r\n                orderId: i.order.id,\r\n                time: i.order.orderPayTime,\r\n                table: i.order.orderTable,\r\n                state: i.order.orderStatus,\r\n                goodsList: []\r\n              });\r\n\r\n              i.orderGoodsList.forEach(g => {\r\n                this.orderList[n].goodsList.push({\r\n                  id: g.id,\r\n                  goodsId: g.goodsId,\r\n                  img: g.goodsImage,\r\n                  name: g.goodsName,\r\n                  num: g.goodsNum,\r\n                  state: g.status\r\n                });\r\n              });\r\n              n++;\r\n            });\r\n          }\r\n        })\r\n        .catch(function(res) {\r\n          console.log(res);\r\n        });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getOrder();\r\n  }\r\n};\r\n</script>\r\n\r\n<style  scoped>\r\n.g {\r\n  color: rgb(12, 195, 12);\r\n}\r\n.r {\r\n  color: red;\r\n}\r\n.el-collapse-head-6883 {\r\n  background-color: blueviolet !important;\r\n}\r\n.el-collapse-item__header {\r\n  background-color: blueviolet !important;\r\n}\r\n</style>"]}]}